(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{nu7b:function(n,t,e){"use strict";e.r(t),e.d(t,"AikaFanReachCalcModule",(function(){return u}));var c=e("ofXK");class o{constructor(){this.fan=3e3,this.fanTarget=2003e3}}class a{constructor(){this.enable=!0}toString(){return`${this.stageName} ${this.fan}`}}var s=e("fXoL"),g=e("F5nt"),r=e("3Pt+");function i(n,t){if(1&n){const n=s.Ob();s.Nb(0,"div"),s.Nb(1,"label"),s.Nb(2,"input",13),s.Ub("ngModelChange",(function(e){s.cc(n);const c=t.$implicit;return s.Wb().enableActressRare[c]=e}))("ngModelChange",(function(){return s.cc(n),s.Wb().updateStageCharacterRare()})),s.Mb(),s.Nb(3,"div"),s.ic(4),s.Mb(),s.Mb(),s.Mb()}if(2&n){const n=t.$implicit,e=s.Wb();s.xb(2),s.Xb("ngModel",e.enableActressRare[n]),s.yb("checked",e.enableActressRare[n]),s.xb(2),s.kc("\u2605",n,"")}}function M(n,t){if(1&n&&(s.Nb(0,"option",14),s.ic(1),s.Mb()),2&n){const n=t.$implicit;s.Xb("ngValue",n),s.xb(1),s.lc("\u2605",n.characterRare," -- ",n.fan," -- ",n.stageName,"")}}function O(n,t){if(1&n&&(s.Nb(0,"span"),s.ic(1),s.Mb()),2&n){const n=s.Wb(2).index;s.xb(1),s.jc(n+1)}}const b=function(n){return{last:n}};function C(n,t){if(1&n&&(s.Nb(0,"tr"),s.Nb(1,"td"),s.gc(2,O,2,1,"span",23),s.Mb(),s.Nb(3,"td"),s.ic(4),s.Mb(),s.Nb(5,"td"),s.ic(6),s.Mb(),s.Nb(7,"td"),s.ic(8),s.Mb(),s.Nb(9,"td",24),s.ic(10),s.Mb(),s.Mb()),2&n){const n=t.$implicit,e=t.last,c=t.index;s.xb(2),s.Xb("ngIf",0==c),s.xb(2),s.jc(n.stage.stageName),s.xb(2),s.jc(n.stage.characterRare),s.xb(2),s.jc(n.count),s.xb(1),s.Xb("ngClass",s.Zb(6,b,e)),s.xb(1),s.jc(n.fanChange)}}function l(n,t){if(1&n&&(s.Lb(0),s.gc(1,C,11,8,"tr",5),s.Nb(2,"tr",21),s.Ib(3,"td",22),s.Mb(),s.Kb()),2&n){const n=t.$implicit;s.xb(1),s.Xb("ngForOf",n)}}function P(n,t){if(1&n){const n=s.Ob();s.Nb(0,"div",15),s.Nb(1,"div",16),s.Nb(2,"div"),s.Nb(3,"span"),s.ic(4,"\u73fe\u6709fan"),s.Mb(),s.Nb(5,"input",17),s.Ub("ngModelChange",(function(e){return s.cc(n),t.$implicit.fan=e})),s.Mb(),s.Mb(),s.Nb(6,"div"),s.Nb(7,"span"),s.ic(8,"\u76ee\u6a19fan"),s.Mb(),s.Nb(9,"input",17),s.Ub("ngModelChange",(function(e){return s.cc(n),t.$implicit.fanTarget=e})),s.Mb(),s.Mb(),s.Mb(),s.Nb(10,"div",18),s.Nb(11,"button",19),s.Ub("click",(function(){s.cc(n);const e=t.$implicit;return s.Wb().runCalc(e)})),s.ic(12,"CALC!"),s.Mb(),s.Mb(),s.Nb(13,"div",20),s.Nb(14,"div"),s.ic(15),s.Mb(),s.Nb(16,"table"),s.Nb(17,"thead"),s.Nb(18,"tr"),s.Nb(19,"th"),s.ic(20,"-"),s.Mb(),s.Nb(21,"th"),s.ic(22,"Stage"),s.Mb(),s.Nb(23,"th"),s.ic(24,"\u89d2\u8272\u2605"),s.Mb(),s.Nb(25,"th"),s.ic(26,"\u56de\u6578"),s.Mb(),s.Nb(27,"th"),s.ic(28,"\u8b8a\u5316"),s.Mb(),s.Mb(),s.Mb(),s.Nb(29,"tbody"),s.gc(30,l,4,1,"ng-container",5),s.Mb(),s.Mb(),s.Mb(),s.Mb()}if(2&n){const n=t.$implicit;s.xb(5),s.Xb("ngModel",n.fan),s.xb(4),s.Xb("ngModel",n.fanTarget),s.xb(6),s.kc("\u6bcf\u65e5\u4efb\u52d9\u65b9\u6848: ",n.fanReachRoads.length,""),s.xb(15),s.Xb("ngForOf",n.fanReachRoads)}}function _(n,t){if(1&n){const n=s.Ob();s.Nb(0,"div",25),s.Nb(1,"div",26),s.Ub("click",(function(){return s.cc(n),s.Wb().addActress()})),s.Nb(2,"div",27),s.Ib(3,"div",28),s.Ib(4,"div",29),s.Mb(),s.Mb(),s.Mb()}}const h=function(){return[1,2,3,4]};let d=(()=>{class n{constructor(n){this.service=n,this.actress=[],this.stageRewardFans=[Object.assign(new a,{fan:110,characterRare:1,stageName:"lv10"}),Object.assign(new a,{fan:147,characterRare:2,stageName:"lv10"}),Object.assign(new a,{fan:184,characterRare:3,stageName:"lv10"}),Object.assign(new a,{fan:220,characterRare:4,stageName:"lv10"}),Object.assign(new a,{fan:112,characterRare:1,stageName:"lv20"}),Object.assign(new a,{fan:150,characterRare:2,stageName:"lv20"}),Object.assign(new a,{fan:188,characterRare:3,stageName:"lv20"}),Object.assign(new a,{fan:225,characterRare:4,stageName:"lv20"}),Object.assign(new a,{fan:115,characterRare:1,stageName:"lv30-vw"}),Object.assign(new a,{fan:153,characterRare:2,stageName:"lv30-vw"}),Object.assign(new a,{fan:192,characterRare:3,stageName:"lv30-vw"}),Object.assign(new a,{fan:230,characterRare:4,stageName:"lv30-vw"}),Object.assign(new a,{fan:117,characterRare:1,stageName:"lv40-vw"}),Object.assign(new a,{fan:156,characterRare:2,stageName:"lv40-vw"}),Object.assign(new a,{fan:196,characterRare:3,stageName:"lv40-vw"}),Object.assign(new a,{fan:235,characterRare:4,stageName:"lv40-vw"}),Object.assign(new a,{fan:150,characterRare:1,stageName:"lv30-\u86c7"}),Object.assign(new a,{fan:200,characterRare:2,stageName:"lv30-\u86c7"}),Object.assign(new a,{fan:250,characterRare:3,stageName:"lv30-\u86c7"}),Object.assign(new a,{fan:300,characterRare:4,stageName:"lv30-\u86c7"}),Object.assign(new a,{fan:153,characterRare:1,stageName:"lv40-\u86c7"}),Object.assign(new a,{fan:204,characterRare:2,stageName:"lv40-\u86c7"}),Object.assign(new a,{fan:255,characterRare:3,stageName:"lv40-\u86c7"}),Object.assign(new a,{fan:306,characterRare:4,stageName:"lv40-\u86c7"})],this.stageSelected=[],this.enableActressRare={1:!0,2:!0,3:!0,4:!0},this.maxCalcDeep=1,this.maxSingleTaskCount=10,this.inputCurrentFan=12345,this.inputTargetFan=1999999,this.resultRoads=[]}ngOnInit(){this.stageSelected.push(...this.stageRewardFans),this.addActress(),this.runCalc(this.actress[0])}addActress(){this.actress.push(new o)}removeActress(n){const t=this.actress.indexOf(n);this.actress=this.actress.splice(t,1)}updateStageCharacterRare(){this.stageSelected=this.stageRewardFans.filter(n=>this.enableActressRare[n.characterRare])}runCalc(n){const t=n.fanTarget-n.fan;if(t<0)return void(this.resultRoads=[]);const e=this.calcRoad(this.stageSelected,0,n.fan,t,0);e.sort((n,t)=>n.reduce((n,t)=>n+t.count,0)-t.reduce((n,t)=>n+t.count,0)),n.fanReachRoads=e}calcRoad(n,t,e,c,o){if(0==c)return[];if(c<0)throw new Error("fan < 0, "+c);if(o>this.maxCalcDeep)throw new Error("calc too deep "+o+", max:"+this.maxCalcDeep);const a=[];let s=[];for(let g=t;g<n.length;g++){const r=n[g];if(0!=c%r.fan)for(let g=1;g<this.maxSingleTaskCount;g++){const i=r.fan*g,M=c-i;if(0==M){s.push({stage:r,count:g,fanChange:`${e} -> ${e+i}`}),a.push(s),s=[];break}if(M<0)break;if(o+1<=this.maxCalcDeep){const c=this.calcRoad(n,t+1,e+i,M,o+1);if(0==c.length)continue;s.push({stage:r,count:g,fanChange:`${e} -> ${e+i}`}),c.forEach(n=>{n.splice(0,0,...s)}),a.push(...c),s=[];break}}else s.push({stage:r,count:c/r.fan,fanChange:`${e} -> ${e+c}`}),a.push(s),s=[]}return a}}return n.\u0275fac=function(t){return new(t||n)(s.Hb(g.a))},n.\u0275cmp=s.Bb({type:n,selectors:[["app-aika-fan-reach-calc"]],decls:15,vars:6,consts:[[1,"root"],[1,"content"],[1,"column","config"],[1,"head"],[1,"config"],[4,"ngFor","ngForOf"],[1,"stage-list"],[1,"name"],["name","stageSelected","multiple","","aria-multiselectable","true",3,"ngModel","ngModelChange"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"column","actress"],["class","actress",4,"ngFor","ngForOf"],["class","actress empty",4,"ngIf"],["type","checkbox",3,"ngModel","ngModelChange"],[3,"ngValue"],[1,"actress"],[1,"row","input"],["type","number",3,"ngModel","ngModelChange"],[1,"row","calc"],[3,"click"],[1,"row","result"],[1,"line"],["colspan","5"],[4,"ngIf"],[3,"ngClass"],[1,"actress","empty"],[1,"head",3,"click"],[1,"add"],[1,"circle"],[1,"plus"]],template:function(n,t){1&n&&(s.Nb(0,"div",0),s.Nb(1,"div",1),s.Nb(2,"div",2),s.Nb(3,"div",3),s.ic(4,"\u6301\u6709\u89d2\u8272\u2605"),s.Mb(),s.Nb(5,"div",4),s.gc(6,i,5,3,"div",5),s.Mb(),s.Nb(7,"div",6),s.Nb(8,"div",7),s.ic(9,"\u2605 -- fan -- Stage"),s.Mb(),s.Nb(10,"select",8),s.Ub("ngModelChange",(function(n){return t.stageSelected=n})),s.gc(11,M,2,4,"option",9),s.Mb(),s.Mb(),s.Mb(),s.Nb(12,"div",10),s.gc(13,P,31,4,"div",11),s.gc(14,_,5,0,"div",12),s.Mb(),s.Mb(),s.Mb()),2&n&&(s.xb(6),s.Xb("ngForOf",s.Yb(5,h)),s.xb(4),s.Xb("ngModel",t.stageSelected),s.xb(1),s.Xb("ngForOf",t.stageRewardFans),s.xb(2),s.Xb("ngForOf",t.actress),s.xb(1),s.Xb("ngIf",!1))},directives:[c.i,r.j,r.d,r.e,c.j,r.a,r.f,r.k,r.g,r.b,c.h],styles:['[_nghost-%COMP%] > .root[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover, [_nghost-%COMP%] > .root[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]:hover{cursor:pointer}[_nghost-%COMP%] > .root[_ngcontent-%COMP%] > .header[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%] > .root[_ngcontent-%COMP%] > .header[_ngcontent-%COMP%] > .calc[_ngcontent-%COMP%]{margin-left:auto;display:flex;align-items:center;cursor:pointer;color:#00f;font-size:16px}[_nghost-%COMP%] > .root[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%] > .root[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .column[_ngcontent-%COMP%]{padding:0 10px;border-right:1px solid #aaa}[_nghost-%COMP%] > .root[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .column.config[_ngcontent-%COMP%] > .config[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{width:120px}[_nghost-%COMP%] > .root[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .column.config[_ngcontent-%COMP%] > .config[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%] > .root[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .column.config[_ngcontent-%COMP%] > .stage-list[_ngcontent-%COMP%] > .stage[_ngcontent-%COMP%]{width:120px}[_nghost-%COMP%] > .root[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .column.config[_ngcontent-%COMP%] > .stage-list[_ngcontent-%COMP%] > .stage[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{display:flex;align-items:center}[_nghost-%COMP%] > .root[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .column.config[_ngcontent-%COMP%] > .stage-list[_ngcontent-%COMP%] > .stage[_ngcontent-%COMP%] > label[_ngcontent-%COMP%] > hr[_ngcontent-%COMP%]{flex:1;border:0;margin:0;padding:0;border-bottom:1px dashed #aaa}[_nghost-%COMP%] > .root[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .column.config[_ngcontent-%COMP%] > .stage-list[_ngcontent-%COMP%] > .stage[_ngcontent-%COMP%] > hr[_ngcontent-%COMP%]{border:0;margin:3px 0;padding:0;border-bottom:1px solid #aaa}[_nghost-%COMP%] > .root[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .column.config[_ngcontent-%COMP%] > .stage-list[_ngcontent-%COMP%] > select[_ngcontent-%COMP%]{height:450px}[_nghost-%COMP%] > .root[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .column.actress[_ngcontent-%COMP%] > .actress[_ngcontent-%COMP%] > .row.input[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > span[_ngcontent-%COMP%]{margin-right:5px}[_nghost-%COMP%] > .root[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .column.actress[_ngcontent-%COMP%] > .actress[_ngcontent-%COMP%] > .row.input[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] > input[_ngcontent-%COMP%]{width:150px;font-size:20px;text-align:right}[_nghost-%COMP%] > .root[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .column.actress[_ngcontent-%COMP%] > .actress[_ngcontent-%COMP%] > .row.input[_ngcontent-%COMP%] > div[_ngcontent-%COMP%] + div[_ngcontent-%COMP%]{margin-top:5px}[_nghost-%COMP%] > .root[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .column.actress[_ngcontent-%COMP%] > .actress[_ngcontent-%COMP%] > .row.calc[_ngcontent-%COMP%]{padding:10px 0}[_nghost-%COMP%] > .root[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .column.actress[_ngcontent-%COMP%] > .actress[_ngcontent-%COMP%] > .row.calc[_ngcontent-%COMP%] > button[_ngcontent-%COMP%]{font-size:18px}[_nghost-%COMP%] > .root[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .column.actress[_ngcontent-%COMP%] > .actress[_ngcontent-%COMP%] > .row.result[_ngcontent-%COMP%] > table[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%] > .root[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .column.actress[_ngcontent-%COMP%] > .actress[_ngcontent-%COMP%] > .row.result[_ngcontent-%COMP%] > table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], [_nghost-%COMP%] > .root[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .column.actress[_ngcontent-%COMP%] > .actress[_ngcontent-%COMP%] > .row.result[_ngcontent-%COMP%] > table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #aaa}[_nghost-%COMP%] > .root[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .column.actress[_ngcontent-%COMP%] > .actress[_ngcontent-%COMP%] > .row.result[_ngcontent-%COMP%] > table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:5px}[_nghost-%COMP%] > .root[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .column.actress[_ngcontent-%COMP%] > .actress[_ngcontent-%COMP%] > .row.result[_ngcontent-%COMP%] > table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr[_ngcontent-%COMP%] > td.last[_ngcontent-%COMP%]{color:#0a0}[_nghost-%COMP%] > .root[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .column.actress[_ngcontent-%COMP%] > .actress[_ngcontent-%COMP%] > .row.result[_ngcontent-%COMP%] > table[_ngcontent-%COMP%] > tbody[_ngcontent-%COMP%] > tr.line[_ngcontent-%COMP%] > td[_ngcontent-%COMP%]{height:20px;border:0;background-color:snow}[_nghost-%COMP%] > .root[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .column.actress[_ngcontent-%COMP%] > .actress[_ngcontent-%COMP%] > .head[_ngcontent-%COMP%]{width:200px;height:400px;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%] > .root[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .column.actress[_ngcontent-%COMP%] > .actress[_ngcontent-%COMP%] > .head[_ngcontent-%COMP%] > .add[_ngcontent-%COMP%]{position:relative;width:150px;height:150px}[_nghost-%COMP%] > .root[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .column.actress[_ngcontent-%COMP%] > .actress[_ngcontent-%COMP%] > .head[_ngcontent-%COMP%] > .add[_ngcontent-%COMP%] > .circle[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;width:100%;height:100%;box-sizing:border-box}[_nghost-%COMP%] > .root[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .column.actress[_ngcontent-%COMP%] > .actress[_ngcontent-%COMP%] > .head[_ngcontent-%COMP%] > .add[_ngcontent-%COMP%] > .circle[_ngcontent-%COMP%]:after{content:" ";position:absolute;top:-50%;left:-50%;box-sizing:border-box;width:100%;height:100%;border:2px solid #aaf;border-radius:50%}[_nghost-%COMP%] > .root[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .column.actress[_ngcontent-%COMP%] > .actress[_ngcontent-%COMP%] > .head[_ngcontent-%COMP%] > .add[_ngcontent-%COMP%] > .plus[_ngcontent-%COMP%]{position:absolute;left:50%;top:50%;width:20%;height:20%;box-sizing:border-box}[_nghost-%COMP%] > .root[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .column.actress[_ngcontent-%COMP%] > .actress[_ngcontent-%COMP%] > .head[_ngcontent-%COMP%] > .add[_ngcontent-%COMP%] > .plus[_ngcontent-%COMP%]:before{content:" ";position:absolute;top:calc(-100% + 2px);left:calc(-100% + 2px);box-sizing:border-box;width:100%;height:100%;border-bottom:2px solid #aaf;border-right:2px solid #aaf}[_nghost-%COMP%] > .root[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .column.actress[_ngcontent-%COMP%] > .actress[_ngcontent-%COMP%] > .head[_ngcontent-%COMP%] > .add[_ngcontent-%COMP%] > .plus[_ngcontent-%COMP%]:after{content:" ";position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;border-top:2px solid #aaf;border-left:2px solid #aaf}[_nghost-%COMP%] > .root[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .column.actress[_ngcontent-%COMP%] > .actress.empty[_ngcontent-%COMP%] > .head[_ngcontent-%COMP%]:hover{cursor:pointer;background-color:#eef}[_nghost-%COMP%] > .root[_ngcontent-%COMP%] > .content[_ngcontent-%COMP%] > .column.actress[_ngcontent-%COMP%] > .actress[_ngcontent-%COMP%] + .actress[_ngcontent-%COMP%]{margin-left:5px}']}),n})();var f=e("tyNb");let u=(()=>{class n{}return n.\u0275mod=s.Fb({type:n}),n.\u0275inj=s.Eb({factory:function(t){return new(t||n)},imports:[[c.b,r.c,f.b.forChild([{path:"",component:d}])]]}),n})()}}]);